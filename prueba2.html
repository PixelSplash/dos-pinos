<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, shrink-to-fit=no">
<title>PepsiCo VR - Panolens.js Prueba 2</title>
<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
<style>
html, body {
	margin: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	background-color: #000;
	font-family: 'Roboto', sans-serif;
}
.container {
	background: #007397d4;
    color: #000;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    position: absolute;
    top: 50%;
    left: 50%;
    border: 3px solid #005874;
    border-radius: 10px;
}
.container a {
	display: block;
    padding: 10px;
    color: #fff;
    font-weight: 600;
}
.container > video {
	width: 100%;
	height: auto;
}
.container > iframe {
	border: none;
	width:100%;
}
#e1c1 {
	color: #fff;
	padding: 30px;
	text-align: center;
	font-size: 20px;
}
.closebtn {
	display: block;
    width: 30px;
    height: 30px;
    text-align: center;
    line-height: 30px;
    font-weight: 900;
    color: #fff;
    background: #007397d4;
    position: absolute;
    top: 0;
    right: 0;
    font-size: 1.2em;
    cursor: pointer;
}
.backpanel {
	position: fixed;
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	background: #007397d4;
	z-index: 10000;
}
.backpanel span {
	font-size: 30px;
    text-transform: uppercase;
    display: block;
    position: absolute;
    color: #fff;
    font-weight: 700;
    letter-spacing: 5px;
    top: 50%;
    text-align: center;
    width: 100%;
}
.label {}

</style>
<script src="jquery-3.3.1.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script src="three.min.js"></script>
<script src="panolens.min.js"></script>
</head>
<body>
<div class="backpanel">
	<span>Loading, please wait</span>
</div>
<div class="label" id="label1">Our brands</div>
<div class="container" id="e1c1" style="display:none;">
	<div>
		<p>Welcome to PepsiCo, weâ€™re so pleased to meet you!</p>
		<p>Please feel free to take a look and walk around!</p>
		<p>In the different environments you will find important information about our products, our brands, performance with purpose, our culture and helpful information about previous challenges!</p>
		<p>Have fun!!! We Dare you!</p>
	</div>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e2c1" style="display:none;">
	<video controls><source src="video1.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e2c2" style="display:none;">
	<video controls><source src="video2.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e3c1" style="display:none;">
	<video controls><source src="video3.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<a href="http://www.pepsico.com/sustainability/performance-with-purpose" target="_blank" class="msg">Read more</a>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e4c1" style="display:none;">
	<video controls><source src="video4.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e4c2" style="display:none;">
	<iframe style="height:500px; max-height: 60%;" src="Campus Programs-converted.pdf"></iframe>
	<a href="https://www.pepsicojobs.com/main/student" target="_blank" class="msg">Read more</a>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c1" style="display:none;">
	<video controls><source src="PepsiCoStudentChallenge_2.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c2" style="display:none;">
	<video controls><source src="Leaders.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c3" style="display:none;">
	<video controls><source src="1CanYouDescribe.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c4" style="display:none;">
	<video controls><source src="WhatsBeen.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c5" style="display:none;">
	<video controls><source src="WhatTrend.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>
<div class="container" id="e5c6" style="display:none;">
	<video controls><source src="WhyPepsiCo.mp4" type="video/mp4">Your browser does not support the video tag.</video>
	<div class="closebtn">X</div>
</div>

<script>
$(window).on('load', function(){

var audioElement = document.createElement('audio');
audioElement.setAttribute('src', 'Lucid_Dreamer.mp3');
audioElement.setAttribute('autoplay', 'autoplay');
audioElement.load()
$.get();
audioElement.addEventListener("load", function() {
audioElement.play();
}, true);

$('.backpanel').css('display','none');

function loading (e){
	console.log(e.progress.loaded / e.progress.total * 100);
	$('.backpanel').css('display','block');
}

function loaded (e){
	console.log('cargado!');
	$('.backpanel').css('display','none');
}

function intro(){
	$('#e1c1').css('display','block');
}
setTimeout(intro, 5000);

var p1, p2, p3, p4, p5, e1i1, e1i2, e1o3, e1i4, e2i1, e2i2, e2i3, e3i0, e3i1, e4i0, e4i1, e4i2, e5i0, e5i1, e5i2, e5i3, e5i4, e5i5, e5i6, viewer ;

pano1 = new PANOLENS.VideoPanorama( 'MenuVideo1920.mp4', {
	autoplay: true,
	playsinline: true,
	muted: true,
});
pano1.addEventListener( 'progress', loading);
pano1.addEventListener( 'load', loaded);
pano2 = new PANOLENS.ImagePanorama( 'Area1.jpg');
pano2.addEventListener( 'progress', loading);
pano2.addEventListener( 'load', loaded);
pano3 = new PANOLENS.ImagePanorama( 'Area2.jpg');
pano3.addEventListener( 'progress', loading);
pano3.addEventListener( 'load', loaded);
pano4 = new PANOLENS.ImagePanorama( 'Area3.jpg');
pano4.addEventListener( 'progress', loading);
pano4.addEventListener( 'load', loaded);
pano5 = new PANOLENS.ImagePanorama( 'Area4.jpg');
pano5.addEventListener( 'progress', loading);
pano5.addEventListener( 'load', loaded);


e1i1 = new PANOLENS.Infospot( 1000, 'infospot_btn_1.png' );
e1i1.position.set( -1036.73, -59.24, -4888.83 );
e1i1.addEventListener('click', function(){
	viewer.setPanorama(pano2);
});
//e1i1.addHoverElement($('#label1'), -100);

e1i2 = new PANOLENS.Infospot( 1000, 'infospot_btn_1.png' );
e1i2.position.set( 2237.72, 77.86, 4460.33 );
e1i2.addEventListener('click', function(){
	viewer.setPanorama(pano3);
});

e1i3 = new PANOLENS.Infospot( 1000, 'infospot_btn_1.png' );
e1i3.position.set( 2345.43, -87.26, -4405.04 );
e1i3.addEventListener('click', function(){
	viewer.setPanorama(pano4);
});

e1i4 = new PANOLENS.Infospot( 1000, 'infospot_btn_1.png' );
e1i4.position.set( -566.54, -228.83, 4956.57 );
e1i4.addEventListener('click', function(){
	viewer.setPanorama(pano5);
});

e2i0 = new PANOLENS.Infospot( 900, 'infospot_btn_2.png' );
e2i0.position.set( 4977.37, 123.30, -339.38 );
e2i0.addEventListener('click', function(){
	viewer.setPanorama(pano1);
});

e2i1 = new PANOLENS.Infospot( 700, 'infospot_btn_1.png' );
e2i1.position.set( 932.53, -1010.80, 4799.47 );
e2i1.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e2c1').css('display','block');
});

e2i2 = new PANOLENS.Infospot( 800, 'infospot_btn_1.png' );
e2i2.position.set( 875.99, 684.61, 4866.08 );
e2i2.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e2c2').css('display','block');
});

e3i0 = new PANOLENS.Infospot( 900, 'infospot_btn_2.png' );
e3i0.position.set( 4834.24, 4.38, -1249.73 );
e3i0.addEventListener('click', function(){
	viewer.setPanorama(pano1);
});
e3i1 = new PANOLENS.Infospot( 1000, 'infospot_btn_1.png' );
e3i1.position.set( -1758.13, 1077.94, -4544.72 );
e3i1.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e3c1').css('display','block');
});

e4i0 = new PANOLENS.Infospot( 900, 'infospot_btn_2.png' );
e4i0.position.set( 1773.77, -191.05, -4659.47 );
e4i0.addEventListener('click', function(){
	viewer.setPanorama(pano1);
})
e4i1 = new PANOLENS.Infospot( 900, 'infospot_btn_1.png' );
e4i1.position.set( 4900.05, -168.72, -938.47 );
e4i1.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e4c1').css('display','block');
});
e4i2 = new PANOLENS.Infospot( 900, 'infospot_btn_1.png' );
e4i2.position.set( -991.24, -493.01, 4870.75 );
e4i2.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e4c2').css('display','block');
});

e5i0 = new PANOLENS.Infospot( 800, 'infospot_btn_2.png' );
e5i0.position.set( 4889.28, -904.50, 473.70 );
e5i0.addEventListener('click', function(){
	viewer.setPanorama(pano1);
});
e5i1 = new PANOLENS.Infospot( 900, 'infospot_btn_1.png' );
e5i1.position.set( -1164.83, -813.79, -4787.03 );
e5i1.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c1').css('display','block');
});
e5i2 = new PANOLENS.Infospot( 900, 'infospot_btn_1.png' );
e5i2.position.set( -4816.16, -595.17, -1165.75 );
e5i2.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c2').css('display','block');
});
e5i3 = new PANOLENS.Infospot( 600, 'infospot_btn_1.png' );
e5i3.position.set( 4606.8, -875.77, -1708.48 );
e5i3.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c3').css('display','block');
});
e5i4 = new PANOLENS.Infospot( 600, 'infospot_btn_1.png' );
e5i4.position.set( 4348.05, -862.34, -2271.51 );
e5i4.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c4').css('display','block');
});
e5i5 = new PANOLENS.Infospot( 600, 'infospot_btn_1.png' );
e5i5.position.set( 3987.75, -843.39, -2752.35 );
e5i5.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c5').css('display','block');
});
e5i6 = new PANOLENS.Infospot( 600, 'infospot_btn_1.png' );
e5i6.position.set( 3648.79, -792.76, -3322.68 );
e5i6.addEventListener('click', function(){
	$('.container').css('display','none');
	$('#e5c6').css('display','block');
});

pano1.add( e1i1, e1i2, e1i3, e1i4 );
pano2.add( e2i0, e2i1, e2i2 );
pano3.add( e3i0, e3i1 );
pano4.add( e4i0, e4i1, e4i2 );
pano5.add( e5i0, e5i1, e5i2, e5i3, e5i4, e5i5, e5i6 );

viewer = new PANOLENS.Viewer({
	output: 'console',
	autoHideInfospot: false,
	viewIndicator: true,

});
viewer.add(pano1, pano2, pano3, pano4, pano5);

// OTROS

$('.closebtn').on('click', function(){
	$('.container').css('display','none');
	$('.container video').trigger('pause');
})

// Autoajuste de contenedor
var wWidth = ($(window).innerWidth()) * 0.5;
var wHeight = ($(window).innerHeight()) * 0.5;
//console.log('Window Width: '+wWidth);
//console.log('Window Height: '+wHeight);
// 16:9 = 0.5625
var arWidth = wHeight / 0.604;
var arHeight = wWidth * 0.604;
//console.log('Aspect Ratio Width: '+arWidth);
//console.log('Aspect Ratio Height: '+arHeight);
if((wWidth > wHeight) && (wWidth > arWidth)){
$('.container').css({
	//height : wHeight,
	width : arWidth,
	marginLeft : -(arWidth / 2),
	marginTop : -( wHeight / 1.8)
});
}
else{
$('.container').css({
	width : wWidth,
	//height : arHeight,
	marginLeft: -(wWidth / 2),
	marginTop: -( arHeight / 2.2)
});
}
});

</script>
</body>